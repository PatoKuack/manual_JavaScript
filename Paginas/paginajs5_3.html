<!DOCTYPE html>
<html lang="es">
<head>
  <!-- No guardar cache en navegadores -->
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="expires" content="0">
  <!-- ------------------- -->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../Estilos/stylejs1.css">
  <link rel="stylesheet" href="../Estilos/stylejs2.css">
  <title>Closure.</title>
</head>
<body>
  <div class="medio">
    <h2 class="white">Closure.</h2>
    <div>
      <p>Es la combinación de una función y el ámbito léxico en la cual ha sido declarada dicha función (un closure recuerda el ámbito en el que ha sido creado).</p>
      <span>
        <b>
          const moneyBox = () => {<br/>
            var saveCoins = 0;<br/>
        </b>
            <em class="coment">//se declara la variable que guardará las monedas.</em><br/>
        <b>
            const countCoins = (coins) => {<br/>
        </b>
              <em class="coment">//se crea una función dentro de la función.</em><br/>
        <b>
              saveCoins += coins;<br/>
              console.log(`La alcancía tiene $${saveCpins}`)<br/>
        </b>
              <em class="coment">//se suman las monedas y se imprime la cantidad.</em><br/>
        <b>
            }<br/>
            return countCoins;<br/>
        </b>
            <em class="coment">//retorna la función "countCoins".</em><br/>
        <b>
          }<br/>
        </b>
          <em class="coment">//se obtiene un Closure porque dentro de la función "moneyBox" combina una función y el ámbito donde se declara.</em><br/>
        <b>
          let myMoneyBox = moneyBox();<br/>
          myMoneyBox(4);
          myMoneyBox(7);
          myMoneyBox(11);
        </b>
        <em class="coment">//el Closure recuerda la asignación del valor anterior guardando el valor actual en la memoria permitiendo usarlo como en este caso para sumarlo.</em>
        <em class="coment">//imprime en consola 3 resultados que serían: 4, 11 y 22</em>
      </span><br/>
      <h3>Variables privadas con Closures.</h3>
      <p>JavaScript por su naturaleza no fomenta el uso de datos privados, pero por medio de los Closures podemos crear valores que solo puedan ser accedidos por medio de métodos, que no van a estar disponibles fuera de esta función.</p>
      <span>
        <b>
          const person = () => {<br/>
            var saveName = "Name";<br/>
        </b>
            <em class="coment">//se crea una variable var para almacenar el dato privado que en este caso será un nombre.</em><br/>
        <b>
            return {<br/>
        </b>
            <em class="coment">//como valor de retorno se devolverán dos instrucciones, una instrucción para obtener el dato privado y otra para instrucción para asignarle o modificar el dato de la variable.</em><br/>
        <b>
              getName: () => {<br/>
                return saveName;<br/>
        </b>
                <em class="coment">//retorna el valor de la variable "saveName".</em><br/>
        <b>
              },<br/>
              setName: (name) => {<br/>
                saveNAme = name;<br/>
        </b>
                <em class="coment">//guarda el valor recibido en el parámetro de esta función en la variable "saveName".</em><br/>
        <b>
              }; 
            } 
          }<br/><br/>
          newPerson = person();<br/>
          console.log(newPerson.getName());<br/>
        </b>
          <em class="coment">//imprime el llamado de la función "person()" con su subfunción "getName()" para recibir el valor de su contenido.</em><br/>
          <em class="coment">//imprime: Name</em><br/>
        <b>
          newPerson.setName('Juan');<br/>
          console.log(newPerson.getName());<br/>
        </b>
          <em class="coment">//invoca a la función "person()" con su subfunción "setName()" para almacenar el nombre que se le envía como argumento y después imprimirá el contenido de la variable llamando a la subfunción "getName()".</em><br/>
          <em class="coment">//imprime: Juan</em>
        </b>
      </span>
    </div>
  </div>
</body>
</html>